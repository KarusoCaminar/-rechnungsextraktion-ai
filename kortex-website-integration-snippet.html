<!-- 
  INTEGRATION CODE F√úR KORTEX WEBSITE
  https://karusocaminar.github.io/koretex-website/index.html
  
  F√ºgen Sie diesen Code in Ihre index.html ein
-->

<!-- ========================================
     OPTION A: Einfacher Button im Live-Demo Bereich
     ======================================== -->

<!-- F√ºgen Sie diesen Code im "Live-Demo" Section ein -->
<section id="live-demo" style="padding: 4rem 2rem; background: #f8f9fa;">
  <div style="max-width: 800px; margin: 0 auto; text-align: center;">
    <h2>Live-Demo</h2>
    <p>Testen Sie unsere KI-Workflows</p>
    
    <!-- Container f√ºr Demo-Buttons -->
    <div style="display: flex; flex-wrap: wrap; gap: 1rem; justify-content: center; margin-top: 2rem;">
      
      <!-- Bestehender Demo-Button (falls vorhanden) -->
      <button onclick="window.open('#', '_blank')" 
              style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
                     color: white; 
                     padding: 16px 32px; 
                     border-radius: 50px; 
                     border: none; 
                     cursor: pointer; 
                     font-size: 1rem; 
                     font-weight: 600;
                     transition: transform 0.2s;">
        Demo in neuem Tab √∂ffnen
      </button>
      
      <!-- NEU: Invoice Extraction Button -->
      <button onclick="openInvoiceWorkflow()" 
              style="background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%); 
                     color: white; 
                     padding: 16px 32px; 
                     border-radius: 50px; 
                     border: none; 
                     cursor: pointer; 
                     font-size: 1rem; 
                     font-weight: 600;
                     transition: transform 0.2s;
                     display: flex;
                     align-items: center;
                     gap: 8px;">
        <span>üìÑ</span>
        <span>Invoice Data Extraction</span>
      </button>
      
    </div>
  </div>
</section>


<!-- ========================================
     OPTION B: Modal/Overlay (Empfohlen)
     ======================================== -->

<!-- F√ºgen Sie diesen Style-Block im <head> ein -->
<style>
  /* Invoice Modal Styles */
  #invoice-modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.85);
    z-index: 10000;
    backdrop-filter: blur(5px);
    animation: fadeIn 0.3s ease;
  }
  
  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }
  
  #invoice-modal.active {
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  #invoice-iframe-container {
    position: relative;
    width: 95%;
    height: 95%;
    max-width: 1600px;
    max-height: 950px;
    background: white;
    border-radius: 16px;
    box-shadow: 0 25px 70px rgba(0, 0, 0, 0.6);
    overflow: hidden;
    animation: slideUp 0.4s ease;
  }
  
  @keyframes slideUp {
    from {
      transform: translateY(50px);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }
  
  #invoice-close-btn {
    position: absolute;
    top: 20px;
    right: 20px;
    background: #ef4444;
    color: white;
    border: none;
    width: 44px;
    height: 44px;
    border-radius: 50%;
    cursor: pointer;
    font-size: 24px;
    line-height: 1;
    z-index: 10001;
    transition: all 0.2s;
    box-shadow: 0 4px 12px rgba(239, 68, 68, 0.4);
  }
  
  #invoice-close-btn:hover {
    background: #dc2626;
    transform: rotate(90deg);
  }
  
  #invoice-iframe {
    width: 100%;
    height: 100%;
    border: none;
  }
  
  /* Button hover effects */
  button:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 30px rgba(59, 130, 246, 0.4);
  }
  
  /* Mobile responsive */
  @media (max-width: 768px) {
    #invoice-iframe-container {
      width: 100%;
      height: 100%;
      border-radius: 0;
    }
  }
</style>

<!-- F√ºgen Sie diesen HTML-Block vor </body> ein -->
<div id="invoice-modal">
  <div id="invoice-iframe-container">
    <button id="invoice-close-btn" onclick="closeInvoiceWorkflow()">&times;</button>
    <iframe id="invoice-iframe" title="Rechnungsextraktion"></iframe>
  </div>
</div>

<!-- JavaScript f√ºr Modal (vor </body> einf√ºgen) -->
<script>
  // ========================================
  // KONFIGURATION
  // ========================================
  
  // ‚ö†Ô∏è WICHTIG: Ersetzen Sie diese URL mit Ihrer Replit-URL
  const INVOICE_WORKFLOW_URL = 'https://rechnungsextraktion-koretex.repl.co';
  
  // F√ºr lokales Testing:
  // const INVOICE_WORKFLOW_URL = 'http://localhost:5000';
  
  
  // ========================================
  // MODAL FUNCTIONS
  // ========================================
  
  function openInvoiceWorkflow() {
    const modal = document.getElementById('invoice-modal');
    const iframe = document.getElementById('invoice-iframe');
    
    // Load iframe
    if (!iframe.src) {
      iframe.src = INVOICE_WORKFLOW_URL + '/upload';
    }
    
    // Show modal
    modal.classList.add('active');
    document.body.style.overflow = 'hidden';
    
    // Analytics (optional - Google Analytics)
    if (typeof gtag !== 'undefined') {
      gtag('event', 'workflow_opened', {
        'event_category': 'engagement',
        'event_label': 'Invoice Extraction'
      });
    }
  }
  
  function closeInvoiceWorkflow() {
    const modal = document.getElementById('invoice-modal');
    modal.classList.remove('active');
    document.body.style.overflow = '';
  }
  
  
  // ========================================
  // EVENT LISTENERS
  // ========================================
  
  // ESC key to close
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      closeInvoiceWorkflow();
    }
  });
  
  // Click outside to close
  document.getElementById('invoice-modal')?.addEventListener('click', (e) => {
    if (e.target.id === 'invoice-modal') {
      closeInvoiceWorkflow();
    }
  });
  
  
  // ========================================
  // COMMUNICATION WITH IFRAME (optional)
  // ========================================
  
  window.addEventListener('message', (event) => {
    // Security check
    if (!event.origin.includes('repl.co') && 
        event.origin !== 'http://localhost:5000') {
      return;
    }
    
    console.log('Message from workflow:', event.data);
    
    // Handle events from invoice app
    if (event.data.type === 'invoice-processed') {
      // Optional: Show notification
      showNotification('‚úÖ Rechnung erfolgreich verarbeitet!');
      
      // Optional: Track in analytics
      if (typeof gtag !== 'undefined') {
        gtag('event', 'invoice_processed', {
          'event_category': 'conversion',
          'invoice_id': event.data.invoice?.id
        });
      }
    }
    
    if (event.data.type === 'close-requested') {
      closeInvoiceWorkflow();
    }
  });
  
  
  // ========================================
  // NOTIFICATION (optional)
  // ========================================
  
  function showNotification(message) {
    // Simple browser notification
    if ('Notification' in window && Notification.permission === 'granted') {
      new Notification('Kortex System', {
        body: message,
        icon: '/favicon.png'
      });
    } else {
      // Fallback: Simple alert or custom toast
      console.log('Notification:', message);
    }
  }
  
  
  console.log('‚úÖ Invoice Workflow Integration loaded');
  console.log('üìç Workflow URL:', INVOICE_WORKFLOW_URL);
</script>


<!-- ========================================
     OPTION C: Card im Workflow-Bereich
     ======================================== -->

<!-- Neuer Section f√ºr Workflows -->
<section id="workflows" style="padding: 4rem 2rem; background: #f8f9fa;">
  <div style="max-width: 1200px; margin: 0 auto;">
    <h2 style="text-align: center; margin-bottom: 1rem;">üöÄ KI-Workflows</h2>
    <p style="text-align: center; color: #6b7280; margin-bottom: 3rem;">
      Testen Sie unsere Automatisierungs-L√∂sungen
    </p>
    
    <!-- Workflow Cards -->
    <div style="display: grid; 
                grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); 
                gap: 2rem;">
      
      <!-- Card 1: Invoice Extraction -->
      <div style="background: white; 
                  padding: 2.5rem; 
                  border-radius: 16px; 
                  box-shadow: 0 4px 12px rgba(0,0,0,0.08);
                  transition: transform 0.2s, box-shadow 0.2s;
                  cursor: pointer;"
           onmouseover="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 8px 24px rgba(0,0,0,0.12)';"
           onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 12px rgba(0,0,0,0.08)';"
           onclick="openInvoiceWorkflow()">
        
        <div style="font-size: 3.5rem; margin-bottom: 1.5rem; text-align: center;">üìÑ</div>
        
        <h3 style="font-size: 1.5rem; margin-bottom: 1rem; text-align: center;">
          Invoice Data Extraction
        </h3>
        
        <p style="color: #6b7280; line-height: 1.6; margin-bottom: 1.5rem; text-align: center;">
          Automatische Rechnungsverarbeitung mit KI. Extraktion aller relevanten Daten in Sekunden.
        </p>
        
        <div style="display: flex; flex-wrap: wrap; gap: 0.5rem; justify-content: center; margin-bottom: 1.5rem;">
          <span style="background: #dbeafe; color: #1e40af; padding: 4px 12px; border-radius: 20px; font-size: 0.85rem;">
            ‚ö° 10 Sek/Rechnung
          </span>
          <span style="background: #dcfce7; color: #166534; padding: 4px 12px; border-radius: 20px; font-size: 0.85rem;">
            ‚úÖ 98% Genauigkeit
          </span>
        </div>
        
        <button onclick="openInvoiceWorkflow(); event.stopPropagation();" 
                style="width: 100%; 
                       background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%); 
                       color: white; 
                       padding: 14px 24px; 
                       border: none; 
                       border-radius: 10px; 
                       cursor: pointer; 
                       font-size: 1rem;
                       font-weight: 600;
                       transition: all 0.2s;">
          Jetzt kostenlos testen ‚Üí
        </button>
      </div>
      
      <!-- Card 2: Coming Soon (Placeholder) -->
      <div style="background: white; 
                  padding: 2.5rem; 
                  border-radius: 16px; 
                  box-shadow: 0 4px 12px rgba(0,0,0,0.08);
                  opacity: 0.6;">
        
        <div style="font-size: 3.5rem; margin-bottom: 1.5rem; text-align: center;">üìß</div>
        
        <h3 style="font-size: 1.5rem; margin-bottom: 1rem; text-align: center;">
          Email Automation
        </h3>
        
        <p style="color: #6b7280; line-height: 1.6; margin-bottom: 1.5rem; text-align: center;">
          Bald verf√ºgbar - Automatische E-Mail-Verarbeitung und Klassifizierung.
        </p>
        
        <button disabled 
                style="width: 100%; 
                       background: #e5e7eb; 
                       color: #9ca3af; 
                       padding: 14px 24px; 
                       border: none; 
                       border-radius: 10px; 
                       cursor: not-allowed; 
                       font-size: 1rem;
                       font-weight: 600;">
          Demn√§chst verf√ºgbar
        </button>
      </div>
      
      <!-- Card 3: Coming Soon (Placeholder) -->
      <div style="background: white; 
                  padding: 2.5rem; 
                  border-radius: 16px; 
                  box-shadow: 0 4px 12px rgba(0,0,0,0.08);
                  opacity: 0.6;">
        
        <div style="font-size: 3.5rem; margin-bottom: 1.5rem; text-align: center;">üìä</div>
        
        <h3 style="font-size: 1.5rem; margin-bottom: 1rem; text-align: center;">
          Document Analysis
        </h3>
        
        <p style="color: #6b7280; line-height: 1.6; margin-bottom: 1.5rem; text-align: center;">
          Bald verf√ºgbar - Intelligente Analyse und Kategorisierung von Dokumenten.
        </p>
        
        <button disabled 
                style="width: 100%; 
                       background: #e5e7eb; 
                       color: #9ca3af; 
                       padding: 14px 24px; 
                       border: none; 
                       border-radius: 10px; 
                       cursor: not-allowed; 
                       font-size: 1rem;
                       font-weight: 600;">
          Demn√§chst verf√ºgbar
        </button>
      </div>
      
    </div>
  </div>
</section>


<!-- ========================================
     INSTALLATION NOTES
     ======================================== -->

<!-- 
  SETUP-SCHRITTE:
  
  1. Replit deployen:
     - Projekt auf replit.com hochladen
     - PostgreSQL aktivieren
     - GOOGLE_CLOUD_CREDENTIALS Secret setzen
     - ALLOWED_ORIGINS Secret: https://karusocaminar.github.io
     - npm run db:push
     - Run klicken
  
  2. Replit URL kopieren:
     - Z.B. https://rechnungsextraktion-koretex.repl.co
  
  3. In diesem Code ersetzen:
     - Zeile 152: INVOICE_WORKFLOW_URL mit Ihrer Replit URL
  
  4. In Ihre index.html einf√ºgen:
     - <style> Block im <head>
     - <div id="invoice-modal"> vor </body>
     - <script> Block vor </body>
     - Button irgendwo auf der Seite
  
  5. Testen & Deployen:
     - git add index.html
     - git commit -m "Add Invoice Extraction workflow"
     - git push origin main
     - GitHub Pages deployed automatisch
  
  FERTIG! ‚úÖ
-->

